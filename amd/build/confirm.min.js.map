{"version":3,"file":"confirm.min.js","sources":["../src/confirm.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Javascript controller for the \"Actions\" panel at the bottom of the page.\n *\n * @module     local_alias\n */\n\ndefine(['jquery', 'core/modal_factory', 'core/str', 'core/modal_events', 'core/ajax', 'core/notification'], function($,\n                                                                                                                     ModalFactory,\n                                                                                                                     String,\n                                                                                                                     ModalEvents,\n                                                                                                                     Ajax,\n                                                                                                                     Notification\n) {\n    var trigger = $('.local_alias_delete_button');\n    ModalFactory.create({\n        type: ModalFactory.types.SAVE_CANCEL,\n        title: String.get_string('delete_alias_title', 'local_alias'),\n        body: String.get_string('delete_alias_body', 'local_alias'),\n        preShowCallback: function(triggerElement, modal) {\n            triggerElement = $(triggerElement);\n            let classString = triggerElement[0].classList[0];\n            let aliasid = classString.substr(classString.lastIndexOf('local_aliasid') + 'local_aliasid'.length);\n            modal.params = {'aliasid': aliasid};\n            modal.setSaveButtonText(String.get_string('delete_alias_button', 'local_alias'));\n        },\n        large: true\n    }, trigger)\n        .done(function(modal) {\n            // Do what you want with your new modal.\n            modal.getRoot().on(ModalEvents.save, function(e) {\n                e.preventDefault();\n                let footer = Y.one('.modal-footer');\n                footer.setContent('Deleting...');\n                let spinner = M.util.add_spinner(Y, footer);\n                spinner.show();\n                let request = {\n                    methodname: 'local_alias_delete_alias',\n                    args: modal.params,\n                };\n                Ajax.call([request])[0].done(function(data) {\n                    spinner.hide();\n                    if (data === true) {\n                        window.location.reload();\n                    } else {\n                        Notification.addNotification({\n                            message: String.get_string('err_delete_alias_failed', 'local_alias'),\n                            type: 'error'\n                        });\n                    }\n                }).fail(Notification.exception);\n            });\n        });\n});\n"],"names":["define","$","ModalFactory","String","ModalEvents","Ajax","Notification","trigger","create","type","types","SAVE_CANCEL","title","get_string","body","preShowCallback","triggerElement","modal","classString","classList","aliasid","substr","lastIndexOf","length","params","setSaveButtonText","large","done","getRoot","on","save","e","preventDefault","footer","Y","one","setContent","spinner","M","util","add_spinner","show","request","methodname","args","call","data","hide","window","location","reload","addNotification","message","fail","exception"],"mappings":"AAqBAA,6BAAO,CAAC,SAAU,qBAAsB,WAAY,oBAAqB,YAAa,sBAAsB,SAASC,EACAC,aACAC,OACAC,YACAC,KACAC,kBAE7GC,QAAUN,EAAE,8BAChBC,aAAaM,OAAO,CAChBC,KAAMP,aAAaQ,MAAMC,YACzBC,MAAOT,OAAOU,WAAW,qBAAsB,eAC/CC,KAAMX,OAAOU,WAAW,oBAAqB,eAC7CE,gBAAiB,SAASC,eAAgBC,WAElCC,aADJF,eAAiBf,EAAEe,iBACc,GAAGG,UAAU,GAC1CC,QAAUF,YAAYG,OAAOH,YAAYI,YAAY,iBAAmB,gBAAgBC,QAC5FN,MAAMO,OAAS,SAAYJ,SAC3BH,MAAMQ,kBAAkBtB,OAAOU,WAAW,sBAAuB,iBAErEa,OAAO,GACRnB,SACEoB,MAAK,SAASV,OAEXA,MAAMW,UAAUC,GAAGzB,YAAY0B,MAAM,SAASC,GAC1CA,EAAEC,qBACEC,OAASC,EAAEC,IAAI,iBACnBF,OAAOG,WAAW,mBACdC,QAAUC,EAAEC,KAAKC,YAAYN,EAAGD,QACpCI,QAAQI,WACJC,QAAU,CACVC,WAAY,2BACZC,KAAM3B,MAAMO,QAEhBnB,KAAKwC,KAAK,CAACH,UAAU,GAAGf,MAAK,SAASmB,MAClCT,QAAQU,QACK,IAATD,KACAE,OAAOC,SAASC,SAEhB5C,aAAa6C,gBAAgB,CACzBC,QAASjD,OAAOU,WAAW,0BAA2B,eACtDJ,KAAM,aAGf4C,KAAK/C,aAAagD"}